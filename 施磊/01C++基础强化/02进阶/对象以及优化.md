### 对象以及优化

---

![image-20231127093111530](/Users/jsyang/Library/Application Support/typora-user-images/image-20231127093111530.png)

![image-20231127093659194](/Users/jsyang/Library/Application Support/typora-user-images/image-20231127093659194.png)

赋值（显示or隐式转化也是）的时候临时对象还会产生

---

#### 指针&引用绑定临时对象

![image-20231127093931548](/Users/jsyang/Library/Application Support/typora-user-images/image-20231127093931548.png)

指针出语句后  临时对象已经被销毁（临时对象没有名字）

引用是有效的 因为引用相当于别名 相当于临时对象有了名字

----

静态局部变量程序运行的时候内存已经存在了 其在程序第一次运行的时候初始化

![image-20231127094631630](/Users/jsyang/Library/Application Support/typora-user-images/image-20231127094631630.png)

![image-20231127094832071](/Users/jsyang/Library/Application Support/typora-user-images/image-20231127094832071.png)

程序结束后 p4析构 注意t4在数据段 程序结束才析构 然后t3 t2 **t4**  t5 t1 

---

#### 函数调用过程中

![image-20231127101715838](/Users/jsyang/Library/Application Support/typora-user-images/image-20231127101715838.png)

注意函数`GetObject`内部是不能直接给`main`中的`t2`赋值的  因为在不同的`栈帧` 需要先拷贝构造临时对象

![image-20231127102640193](/Users/jsyang/Library/Application Support/typora-user-images/image-20231127102640193.png)

![image-20231127103301479](/Users/jsyang/Library/Application Support/typora-user-images/image-20231127103301479.png)

![image-20231127103137253](/Users/jsyang/Library/Application Support/typora-user-images/image-20231127103137253.png)

连续两次优化

----

#### 右值引用

![image-20231127105752230](/Users/jsyang/Library/Application Support/typora-user-images/image-20231127105752230.png)

这两句话指令是完全一样的



![image-20231127105922267](/Users/jsyang/Library/Application Support/typora-user-images/image-20231127105922267.png)

![image-20240315133633282](/Users/jsyang/Library/Application Support/typora-user-images/image-20240315133633282.png)

构造的是main函数栈帧上的临时对象

![image-20231127110157999](/Users/jsyang/Library/Application Support/typora-user-images/image-20231127110157999.png)

分别定义右值对象的拷贝构造和赋值 来优化两次不必要的内存开辟和释放

`delete`或者`free`空指针没有任何操作

---

#### 完美转发

![image-20231127144003196](/Users/jsyang/Library/Application Support/typora-user-images/image-20231127144003196.png)

注意 这里不管是左值引用变量还是右值引用变量  `val`本身还是左值

使用 **完美转发**

![image-20231127144148264](/Users/jsyang/Library/Application Support/typora-user-images/image-20231127144148264.png)